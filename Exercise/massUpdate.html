<!DOCTYPE html>
    <head>
        <script src="https://www.gstatic.com/firebasejs/5.8.3/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyCBU5OflMm1BDP2rBsIdoc5xDbz5yWMpRU",
            authDomain: "effit-51aa5.firebaseapp.com",
            databaseURL: "https://effit-51aa5.firebaseio.com",
            projectId: "effit-51aa5",
            storageBucket: "effit-51aa5.appspot.com",
            messagingSenderId: "512038169526"
          };
          firebase.initializeApp(config);
        </script>

    </head>

    <body>
        <a href='addExercise.html'>To Add Exercise</a><br>
        <a href='addRoutine.html'>To Add Routine</a><br><br>
        <a href='updateExercise.html'>To Update Exercise</a><br><br>
        <h1>Mass Update Exercise:</h1><br>
        <form name="myform">
            Keyword: <input type="text" id='keyword' placeholder="Barbell/Dumbbell/..."><br>
        </form><br><br>

        <button id='updateFBKeyword' onclick="">Update Equipment with Keyword</button><br><br>
        <button id='updateFirebase' onclick="updateFirebase()">Update Firebase: Add Array</button>

        <p>Muscle Groups: Abdominals<br>Adductors<br>Quadriceps<br>Biceps<br>Shoulders<br>Chest<br>Hamstrings<br>Middle Back<br>Calves<br>Glutes<br>Lower Back<br>Lats<br>Triceps<br>Traps<br>Stationary<br>Forearms<br>Neck<br>Abductors<br>Treadmill<br>Biceps</p><br>
    </body>
    

    <script>
        //Get a reference to the firebase database
        var database = firebase.firestore();

        String.prototype.capitalize = function(){
            return this.replace(/(?:^|\s)\S/g, function(a) {return a.toUpperCase();});
        }

        /*
        //function for adding into firebase
        function updateFBKeyword(){
            //Create local variables
            var exercise_Name = document.getElementById('name').value.capitalize();
            //var muscle_Group = document.getElementById('musclegroup').value.capitalize();
            var exerciseType = document.getElementById('exerciseType').value;
            var mechanics = document.getElementById('mechanics').value;
            var equipment_Needed = document.getElementById('equipmentNeeded').value;
            var difficulty = document.getElementById('difficulty').value;
            var spotter_Recommended = document.getElementById('spotterRecommended').value;
            var description = document.getElementById('description').value;
            
            database.collection("NewExerciseDB").update({
                    //Exercise_Name: exercise_Name,
                    //Muscle_Group: muscle_Group,
                    //Exercise_Type : exerciseType,
                    //Mechanics: mechanics,
                    //Equipment_Needed: equipment_Needed,
                    //Spotter_Recommended: spotter_Recommended,
                    //Difficulty: difficulty,
                    //Description: description,
                })
                .then(function() {
                    // Data saved successfully!
                    console.log("Exercise: " + exercise_Name + " was Updated!" + "\n");
                })
                .catch(function(error) {
                    // The write failed...
                    console.log("\nFailed to Update: " + exercise_Name + "\n")
                });
        }*/
        

        function updateFirebase(){

            var reference = database.collection("NewExerciseDB");
            reference
            .get()
            .then(function(querySnapshot) {
                querySnapshot.forEach(function(snapDoc) {
                    let data = snapDoc.data();
                    let exName = data["Exercise_Name"];
                    let name = data["Exercise_Name"].split(" ");
                    console.log(name);
                    
                    reference.doc(exName).set({
                        keywords: name
                    }, {merge: true});
                    /*var tempRef = doc;
                    var merge = tempRef.update({
                        keywords: name
                    }, {merge: true});
                    doc.update({
                        keywords: name
                    }, {merge: true});*/
                    console.log(name + " has been set!");
                });
            })
            .catch(function(error) {
                console.log("Error getting documents: ", error);
            });
        }
    </script>
</html>